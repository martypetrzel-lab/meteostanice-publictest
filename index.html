<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>Meteostanice â€“ mozek v akci</title>
<style>
body {
  font-family: system-ui;
  background: radial-gradient(circle at top, #1b2a4e, #050b1e);
  color: #fff;
  padding: 40px;
}
.grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 20px;
}
.card {
  background: rgba(255,255,255,0.05);
  padding: 20px;
  border-radius: 16px;
}
h1 { margin-bottom: 30px; }
.value { font-size: 1.4em; }
.small { opacity: 0.6; margin-top: 10px; }
</style>
</head>
<body>

<h1>ğŸŒ¦ï¸ Meteostanice â€“ mozek v akci</h1>

<div class="grid">
  <div class="card">
    <h3>ğŸŒ ProstÅ™edÃ­</h3>
    <div>SvÄ›tlo: <span id="light" class="value">â€“</span> lx</div>
    <div>Teplota: <span id="temp" class="value">â€“</span> Â°C</div>
  </div>

  <div class="card">
    <h3>ğŸ”‹ Energie</h3>
    <div>SOC: <span id="soc" class="value">â€“</span> %</div>
    <div>VÃ½roba: <span id="prod" class="value">â€“</span> W</div>
  </div>

  <div class="card">
    <h3>ğŸŒ€ VÄ›trÃ¡k</h3>
    <div id="fan" class="value">â€“</div>
  </div>

  <div class="card">
    <h3>ğŸ§  Mozek</h3>
    <div id="verdict">â€“</div>
  </div>
</div>

<div class="small">Data Ätena ze /state â€“ aktualizace kaÅ¾dou 1 s</div>

<script>
async function update() {
  try {
    const r = await fetch("/state");
    const s = await r.json();

    light.textContent = s.environment.light.toFixed(1);
    temp.textContent = s.device.temperature.toFixed(1);
    soc.textContent = (s.power.soc * 100).toFixed(1);
    prod.textContent = s.power.production.toFixed(2);
    fan.textContent = s.device.fan ? "ZAPNUTÃ" : "VYPNUTÃ";
    verdict.textContent = s.brain.verdict;
  } catch (e) {
    console.error("STATE ERROR", e);
  }
}
setInterval(update, 1000);
update();
</script>

</body>
</html>
